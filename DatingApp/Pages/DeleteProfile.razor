@page "/delete-profile"
@inject IDatingAppService DatingAppService
@inject NavigationManager Navigation

<h3>Delete Profile</h3>

<p>Are you sure you want to delete your profile?</p>
<button @onclick="DeleteProfileAsync">Delete Profile</button>

<div>
    @if (ProfileDeleted.HasValue)
    {
        if (ProfileDeleted.Value)
        {
            <p>Profile deleted successfully!</p>
        }
        else
        {
            <p>@ErrorMessage</p>
        }
    }
</div>

@code {
    private bool? ProfileDeleted { get; set; }
    private string? ErrorMessage { get; set; }

    private async Task DeleteProfileAsync()
    {
        try
        {
            // You can replace this with the actual logic to get the logged-in user's ID
            int userId = 1; // Replace with the actual user ID
            bool success = await DatingAppService.DeleteProfileAsync(userId);

            if (success)
            {
                ProfileDeleted = true;
                ErrorMessage = string.Empty;
            }
            else
            {
                ProfileDeleted = false;
                ErrorMessage = "Profile deletion failed.";
            }
        }
        catch (Exception ex)
        {
            ProfileDeleted = false;
            ErrorMessage = ex.Message;
        }
    }
}
